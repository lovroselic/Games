
$(document).ready(function(){$("form").bind("keypress",function(b){if(b.keyCode==13){return false}});$("#start").click(function(){a()});$("#howmany").focusout(function(){var b=$(this).val();$(this).val(validateInput(b,5,20,10))});$("#check").click(function(){checkAnswers()});function a(){$("#board table tbody").html("");$("#result").html("");$("#window").show();$("#buttons").fadeIn(400);$("#board").fadeIn(400);var q=["a calf","calves","a crisis","crises","a deer","deer","a dwarf","dwarves","a domino","dominoes","an elf","elves","a fly","flies","a hoof","hooves","a leaf","leaves","a moose","moose","a nucleus","nuclei","an octopus","octopi","a quiz","quizzes","a scarf","scarves","a sheep","sheep","a sheaf","sheaves","a series","series","a species","species","a spy","spies","a syllabus","syllabi","a thesis","theses","a thief","thieves","a try","tries","a waltz","waltzes","a wharf","wharves","a wife","wives","a woman","women","an analysis","analyses","an axis","axes","a means","means","an ox","oxen","a die","dice","a scissors","scissors","a synthesis","syntheses","a half","halves","a louse","lice","a loaf","loaves","an oasis","oases","a swine","swine","a vertex","vertices","a wolf","wolves","a cactus","cacti"];var h=["a baby","babies","a child","children","a city","cities","a copy","copies","a family","families","a fish","fish","a foot","feet","a knife","knives","a lady","ladies","a life","lives","a man","men","a mouse","mice","a party","parties","a shelf","shelves","a story","stories","a tomato","tomatoes","a potato","potatoes","a tooth","teeth","a volcano","volcanoes","a fireman","firemen","a goose","geese","a person","people","a policeman","policemen"];var c=["an apple","apples","a toy","toys","an ant","ants","a plant","plants","a book","books","a pencil","pencils","a bag","bags","a car","cars","an orange","oranges","a bear","bears","a cat","cats","a dog","dogs","a brother","brothers","a sister","sisters","a flower","flowers","a lesson","lessons","a game","games","a drink","drinks","a hat","hats","a ring","rings","a boot","boots","a shoe","shoes","a shirt","shirts","a belt","belts","a cake","cakes","a cookie","cookies","a plum","plums","a pumpkin","pumpkins","an egg","eggs","a pear","pears","an apricot","apricots","an onion","onions","a steak","steaks","a rose","roses","a mountain","mountains","a hill","hills"," a flower","flowers","a lake","lakes","a river","rivers","a rock","rocks","a road","roads","a door","doors","a board","boards","a chair","chairs","a window","windows","a locker","lockers","a box","boxes","an office","offices","a toilet","toilets","a note","notes","a map","maps","a cloud","clouds","a hand","hands","an eye","eyes","a head","heads","an arm","arms","a face","faces","a cheek","cheeks","an owl","owls","a shark","sharks","a wasp","wasps","an alligator","alligators","a camel","camels","a frog","frogs","a worm","worms","an insect","insects","a princess","princesses","a train","trains","a violin","violins","a drum","drums","a mug","mugs","a fork","forks","a house","houses","a castle","castles","a teacher","teachers","a doctor","doctors"];console.log(q.length);nouns=h;howMany=$("#howmany").val();$level=$("input[name='level']");var m=0.4;if($level[1].checked===true){nouns=nouns.concat(q);m=2}if($("#regular").prop("checked")===true){var p=c.length/2;console.log(p);var k=Math.floor(howMany*m);var n=createVerbArray(p,k);var g=[];for(var e=0;e<k;e++){g.push(c[n[e]*2]);g.push(c[n[e]*2+1])}nouns=nouns.concat(g);console.log(g)}var l=nouns.length;var o=[];var d=[];for(var f=0;f<l;f+=2){o.push(nouns[f].trim());d.push(nouns[f+1].trim())}complexArray=[o,d];var b=o.length;problem=createVerbArray(b,howMany);setField(howMany)}});function rnd(b,a){return Math.floor(Math.random()*(++a-b)+b)}function createVerbArray(g,f){var e=[];var c=[];for(var b=0;b<g;b++){e[b]=b}var d;for(var a=0;a<f;a++){d=e.length;addx=rnd(0,d-1);c[a]=e[addx];e.splice(addx,1)}return c}function setField(b){for(var a=1;a<=b;a++){line="<tr><td>"+a+".</td>";line+=setLine(a);line+="</tr>";$("#board table tbody").append(line)}}function setLine(c){$fixed=$("input[name='fixed']");if($fixed[1].checked===true){which=rnd(1,2)}else{which=1}var b="";for(var a=1;a<=2;a++){if((a-which)){b+="<td><input class='fill' id='row"+c+"col"+a+"' type='text'/></td>"}else{b+="<td>"+complexArray[a-1][problem[c-1]]+"</td>"}}return b}function checkAnswers(){var a=$("#board table tbody td input");var h=howMany;var f=0;var j="";var k,b,i,g,e;for(var d=0;d<h;d++){j=a[d].id;b=d+1;k=j[j.indexOf("col")+3];i=complexArray[k-1][problem[b-1]];g=$("#"+j).val();g=g.trim();if(i===g){$("#"+j).replaceWith("<span class='right'>"+i+"</span>");f++}else{$("#"+j).replaceWith("<span class='wrong'>"+g+"</span>: <span class='shouldbe'>"+i+"</span>")}}e=Math.floor((f/h)*100);var c=getGrade(e);$("#result").html("<p>Your result: "+e+"%. "+c+"</p>")}function getGrade(a){switch(true){case (a==100):return"Amazing! Perfect score.";case (a>95):return"Excellent";case (a>90):return"Very well done.";case (a>80):return"Nice.";case (a>=70):return"Hmmm. Play again and try to do better.";case (a<70):return"This was not good. You should practice more."}}function validateInput(d,b,a,c){if(isNaN(d)){return c}if(d<b){return b}if(d>a){return a}return d};