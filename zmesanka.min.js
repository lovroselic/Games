
var answer,correctAnswers;var button="<input type=button' id='submit' value='' title='Click here to submit answer or use Enter' />";$(document).ready(function(){func20=[postevanka20,deljenka20,sestevanka20,odstevanka20];func99=[postevanka,deljenka,sestevanka,odstevanka];$("form").bind("keypress",function(a){if(a.keyCode==13){return false}});$("#start").click(function(){$("#board table tbody").html("");$("#result").html("");$("#window").show();$("#board").fadeIn(400);$("#board")[0].scrollIntoView(true);$("#start").prop("disabled",true);$("input[name='oper']").prop("disabled",true);$("input[name='conver']").prop("disabled",true);$("input[name='range']").prop("disabled",true);correctAnswers=0;selectedOperation=[];testChecks();stRacGlobal=$("#strac").val();toGo=stRacGlobal;toGo--;answer=createLine(stRacGlobal-toGo)});$("#board").on("keypress","#inp",function(a){if(a.which==13){a.preventDefault();checkResult()}});$("#board").on("click","#submit",function(){checkResult()});$("#convert_none ").click(function(){if(this.checked){$("#convert_operands").prop("checked",false);$("#convert_result").prop("checked",false)}});$("#convert_operands ").click(function(){if(this.checked){$("#convert_none").prop("checked",false)}});$("#convert_result ").click(function(){if(this.checked){$("#convert_none").prop("checked",false)}});$("#strac").focusout(function(){var a=$(this).val();if(isNaN(a)){$(this).val("10")}if(a<5){$(this).val("5")}if(a>50){$(this).val("50")}})});function checkExceptions(a){switch(a){case"twelve":return 12;case"eleven":return 11;case"ten":return 10;default:return -1}}function teensToNum(a){switch(a){case"thir":return 13;case"four":return 14;case"fif":return 15;case"six":return 16;case"seven":return 17;case"eigh":return 18;case"nine":return 19;default:return -1}}function eniceToNum(a){switch(a){case"one":return 1;case"two":return 2;case"three":return 3;case"four":return 4;case"five":return 5;case"six":return 6;case"seven":return 7;case"eight":return 8;case"nine":return 9;default:return -1}}function deseticeToNum(a){switch(a){case"twenty":return 20;case"thirty":return 30;case"forty":return 40;case"fifty":return 50;case"sixty":return 60;case"seventy":return 70;case"eighty":return 80;case"ninety":return 90;default:return -1}}function wordToNum(g){g=g.toLowerCase();g=g.trim();var f=g.indexOf("ty");if(f<0){var e=g.indexOf("teen");if(e<0){var d=checkExceptions(g);if(d>0){return d}else{return eniceToNum(g)}}else{var b=g.slice(0,e);b=teensToNum(b);return b}}else{var h=g.indexOf("-");if(h<0){return deseticeToNum(g)}else{var c=g.slice(0,h);var a=g.slice(h+1);c=deseticeToNum(c);a=eniceToNum(a);if(c<0||a<0){return -1}else{return c+a}}}}function numToWord(e){var d=e%10;var b=Math.floor(e/10);if(e>=20){var c=numToEnice(d);var f=numToDesetice(b);var a;if(c===-1){a=f}else{a=f+"-"+c}return a}else{if(e<=10){if(b){return numToDesetice(b)}else{return numToEnice(d)}}else{if(e===11){return"eleven"}else{if(e===12){return"twelve"}else{if(e>12&&e<20){return numToTeen(e)}}}}}}function numToEnice(a){switch(a){case 1:return"one";case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";case 9:return"nine";default:return -1}}function numToDesetice(a){switch(a){case 1:return"ten";case 2:return"twenty";case 3:return"thirty";case 4:return"forty";case 5:return"fifty";case 6:return"sixty";case 7:return"seventy";case 8:return"eighty";case 9:return"ninety";default:return -1}}function numToTeen(a){switch(a){case 13:return"thirteen";case 14:return"fourteen";case 15:return"fifteen";case 16:return"sixteen";case 17:return"seventeen";case 18:return"eighteen";case 19:return"nineteen";default:return -1}}function testChecks(){$oper=$("input[name='oper']");var d=$oper.length;var c=0;var b=[];if($("#to99").prop("checked")===true){b=func99}else{b=func20}for(var a=0;a<d;a++){if($oper[a].checked===true){c++;selectedOperation.push(b[a])}}if(!c){alert("At least one arithmetic operation must be selected.");return c}}function createLine(e){var d="";d+="<tr><td>"+e+". </td>";var a=selectedOperation.length;var c=rnd(1,a);var b=selectedOperation[c-1]();if($("#convert_operands").prop("checked")===true){b[0]=numToWord(b[0]);b[1]=numToWord(b[1])}d+="<td>"+b[0]+"</td><td>"+b[2]+"</td><td>"+b[1]+"</td><td>=</td>";d+="<td><input class='fill' id='inp'/>"+button+"</td></tr>";$("#board table tbody").append(d);$("#inp").focus();return b[3]}function postevanka(){var b=[];var a,d,c;a=rnd(1,10);d=rnd(1,10);if(a===10&&d===10){a--}c=a*d;b[0]=a;b[1]=d;b[2]="*";b[3]=c;return b}function postevanka20(){var b=[];var a,d,c;a=rnd(1,6);c=Math.floor(20/a);d=rnd(1,c);c=a*d;b[0]=a;b[1]=d;b[2]="*";b[3]=c;return b}function deljenka(){var b=[];var a,d,c;a=rnd(1,10);d=rnd(1,10);if(a===10&&d===10){a--}c=a*d;b[0]=c;b[1]=d;b[2]="/";b[3]=a;return b}function deljenka20(){var b=[];var a,d,c;a=rnd(1,6);c=Math.floor(20/a);d=rnd(1,c);c=a*d;b[0]=c;b[1]=d;b[2]="/";b[3]=a;return b}function sestevanka(){var b=[];var a,d,c;a=rnd(1,85);d=rnd(1,99-a);c=a+d;b[0]=a;b[1]=d;b[2]="+";b[3]=c;return b}function sestevanka20(){var b=[];var a,d,c;a=rnd(1,85);d=rnd(1,20-a);c=a+d;b[0]=a;b[1]=d;b[2]="+";b[3]=c;return b}function odstevanka(){var b=[];var a,d,c;a=rnd(1,85);d=rnd(1,99-a);c=a+d;b[0]=c;b[1]=d;b[2]="-";b[3]=a;return b}function odstevanka20(){var b=[];var a,d,c;a=rnd(1,17);d=rnd(1,20-a);c=a+d;b[0]=c;b[1]=d;b[2]="-";b[3]=a;return b}function rnd(b,a){return Math.floor(Math.random()*(++a-b)+b)}function checkResult(){var a=$("#inp").val();var b=$("#convert_result").prop("checked");if(b){answer=numToWord(answer);a=a.trim().toLowerCase()}if(a==answer){$("#inp").replaceWith("<span class='right'>"+answer+"</span>");correctAnswers++}else{$("#inp").replaceWith("<span class='wrong'>"+a+"</span> --> <span class='shouldbe'>"+answer+"</span>")}$("#submit").remove();if(!toGo){end();return}toGo--;answer=createLine(stRacGlobal-toGo);return}function end(){$("#start").prop("disabled",false);$("input[name='oper']").prop("disabled",false);$("input[name='conver']").prop("disabled",false);$("input[name='range']").prop("disabled",false);var b=Math.floor((correctAnswers/stRacGlobal)*100);var a=getGrade(b);$("#result").html("<p>Your result: "+b+"%. "+a+"</p>")}function getGrade(a){switch(true){case (a==100):return"Amazing! Perfect score.";case (a>95):return"Excellent";case (a>90):return"Very well done.";case (a>80):return"Nice.";case (a>=70):return"Hmmm. Play again and try to do better.";case (a<70):return"This was not good. You should practice more."}};